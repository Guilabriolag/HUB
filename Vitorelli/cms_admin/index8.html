<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LabSystem CMS - Painel de Gerenciamento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* ======================================= */
        /* Cores e Vari√°veis do LabSystem */
        /* ======================================= */
        :root {
            --clr-primary: #007bff; /* Azul El√©trico (Principal) */
            --clr-accent: #ffc107; /* Amarelo Raio (Destaque) */
            --clr-toggle: #1f2937; /* Cinza Escuro do Toggle */
        }
        /* Classes Tailwind customizadas */
        .text-primary { color: var(--clr-primary); }
        .bg-primary { background-color: var(--clr-primary); }
        .hover\:bg-primary-dark:hover { background-color: #0056b3; } /* Tom mais escuro do azul */

        /* ======================================= */
        /* Estilos do Menu Radial Flutuante e Arrast√°vel */
        /* ======================================= */
        .radial-menu {
            position: fixed;
            /* Inicia no canto inferior direito para telas grandes */
            bottom: 50px; 
            right: 50px; 
            width: 70px;
            height: 70px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            cursor: move; /* Indica que √© arrast√°vel */
            border-radius: 50%;
            /* Adicionado para transi√ß√£o suave na mudan√ßa de posi√ß√£o (opcional) */
            transition: transform 0.1s ease-out; 
        }
        
        .radial-menu .toggle {
            position: absolute;
            width: 70px;
            height: 70px;
            background: var(--clr-toggle);
            border: 3px solid var(--clr-primary);
            border-radius: 50%;
            color: var(--clr-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 100;
            font-size: 2.2em;
            transition: transform 0.5s, box-shadow 0.3s, background 0.3s;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        .radial-menu.active .toggle {
            transform: rotate(315deg);
            color: var(--clr-toggle);
            background: var(--clr-accent); /* Toggle Amarelo quando ativo */
            box-shadow: 0 0 10px var(--clr-accent), 0 0 30px var(--clr-accent);
        }

        .radial-menu li {
            position: absolute;
            list-style: none;
            width: 55px;
            height: 55px;
            background: #fff;
            border: 2px solid var(--clr-primary); /* Borda Azul */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            color: var(--clr-toggle);
            transform: rotate(calc(45deg * var(--i))) translate(0px); /* Come√ßa no centro */
            transition: 0.5s;
            opacity: 0;
            pointer-events: none;
            cursor: pointer;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        
        .radial-menu.active li {
            opacity: 1;
            pointer-events: auto;
            /* Move para fora, rotacionando o item para que o √≠cone fique reto */
            transform: rotate(calc(45deg * var(--i))) translate(110px) rotate(calc(-45deg * var(--i)));
            transition: 0.5s;
        }
        
        .radial-menu li:hover {
            background: var(--clr-primary);
            color: #fff;
            box-shadow: 0 0 10px var(--clr-primary), 0 0 30px var(--clr-primary);
        }
    </style>
</head>
<body class="bg-gray-100 antialiased">
    
    <ul class="radial-menu" id="radial-menu">
        <div class="toggle" onclick="toggleMenu(event)" title="Menu de Navega√ß√£o">
            <i class="fas fa-bars"></i>
        </div>
        
        <li style="--i:0" onclick="showTab('publicacao', event)" title="Publica√ß√£o">
            <i class="fas fa-upload"></i>
        </li>
        <li style="--i:1" onclick="showTab('operacionais', event)" title="Dados Operacionais">
            <i class="fas fa-cogs"></i>
        </li>
        <li style="--i:2" onclick="showTab('cardapio', event)" title="Card√°pio / Itens">
            <i class="fas fa-pizza-slice"></i>
        </li>
        <li style="--i:3" onclick="showTab('customizar', event)" title="Visual e Layout">
            <i class="fas fa-palette"></i>
        </li>
        <li style="--i:4" onclick="previewTotem(event)" title="Preview em Tempo Real">
            <i class="fas fa-eye"></i>
        </li>
        <li style="--i:5" onclick="stopInteraction(event)" title="Ajuda">
            <i class="fas fa-question-circle"></i>
        </li>
        <li style="--i:6" onclick="stopInteraction(event)" title="Seguran√ßa">
            <i class="fas fa-lock"></i>
        </li>
        <li style="--i:7" onclick="stopInteraction(event)" title="Sair">
            <i class="fas fa-sign-out-alt"></i>
        </li>
    </ul>


    <div class="flex-1 flex flex-col overflow-hidden">
        <header class="flex items-center justify-between p-4 bg-white border-b border-gray-200 shadow-md">
            
            <div class="flex items-center space-x-3">
                <h1 class="text-xl md:text-2xl font-semibold text-gray-800" id="current-title">Publica√ß√£o</h1>
            </div>

            <div class="flex items-center space-x-3 md:space-x-4">
                <span class="text-sm font-medium text-gray-500 hidden sm:inline">LabSystem CMS</span>
                
                <button class="px-3 py-1 md:px-4 md:py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition duration-150 ease-in-out text-sm md:text-base font-medium" onclick="publicarDados()">
                    üöÄ Sincronizar e Publicar
                </button>
            </div>
        </header>

        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-4 md:p-6">
            
            <div id="tab-publicacao" class="tab-content" style="display: block;">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-xl font-semibold mb-4 text-primary">Status de Publica√ß√£o Serverless</h2>
                    <p class="text-gray-600 mb-6">Coordena o envio de dados configurados para o seu **BIN ID** (JSONBin.io) e atualiza o Totem Digital em tempo real.</p>
                    
                    <div class="space-y-4 mb-8 p-4 border rounded-lg bg-yellow-50 border-yellow-300">
                        <label class="block text-gray-700 font-bold">BIN ID (JSONBin)</label>
                        <input type="text" id="binId" value="654321xyz" class="w-full p-2 border border-gray-300 rounded-md bg-white focus:ring-primary focus:border-primary">
                        
                        <label class="block text-gray-700 font-bold">Master Key (Escrita/Grava√ß√£o)</label>
                        <input type="password" id="masterKey" value="SUA_CHAVE_SECRETA_AQUI" class="w-full p-2 border border-gray-300 rounded-md bg-white focus:ring-primary focus:border-primary">
                    </div>

                    <button class="w-full py-3 bg-primary text-white text-lg font-bold rounded-md hover:bg-primary-dark transition duration-150 ease-in-out" onclick="publicarDados()">
                        üöÄ Publicar Tudo Agora (Sincronizar com Totem)
                    </button>

                    <p class="mt-4 text-sm text-center text-gray-500">A publica√ß√£o √© instant√¢nea e atualizar√° o Totem Digital.</p>
                </div>
            </div>

            <div id="tab-operacionais" class="tab-content" style="display: none;">
                 <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-xl font-semibold mb-6 text-primary">Gerenciamento Operacional da Loja</h2>
                    
                    <div class="mb-8 p-5 border rounded-lg bg-gray-50">
                        <h3 class="text-lg font-bold text-gray-800 border-b pb-2 mb-4">üìá Dados Institucionais</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="block text-sm font-medium text-gray-700">Nome da Loja</label><input type="text" value="McClone Lanches" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div><label class="block text-sm font-medium text-gray-700">Telefone Principal</label><input type="text" value="(XX) XXXXX-XXXX" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div><label class="block text-sm font-medium text-gray-700">Chave PIX</label><input type="text" value="chave-pix-aleatoria@email.com" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div><label class="block text-sm font-medium text-gray-700">Endere√ßo F√≠sico</label><input type="text" value="Rua Exemplo, 123" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700">Dados Banc√°rios</label><input type="text" value="Ag√™ncia: XXXX, Conta: YYYY" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700">URL do Logo</label><input type="url" value="https://example.com/logo.png" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700">Mensagem de Pagamento</label><textarea rows="2" class="mt-1 w-full p-2 border rounded-md">Por favor, envie o comprovante de pagamento.</textarea></div>
                        </div>
                        <div class="mt-4 flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-semibold" onclick="salvarRascunho('institucional')">Salvar Dados</button></div>
                    </div>

                    <div class="mb-8 p-5 border rounded-lg bg-gray-50">
                        <h3 class="text-lg font-bold text-gray-800 border-b pb-2 mb-4">üïí Hor√°rios e Cobertura</h3>
                        <div class="space-y-4">
                            <label class="block text-sm font-medium text-gray-700">Dias de Funcionamento</label>
                            <div class="flex flex-wrap gap-2 text-sm">
                                <span class="p-2 border rounded-full bg-primary text-white">Seg</span>
                                <span class="p-2 border rounded-full bg-primary text-white">Ter</span>
                                <span class="p-2 border rounded-full bg-primary text-white">Qua</span>
                                <span class="p-2 border rounded-full bg-primary text-white">Qui</span>
                                <span class="p-2 border rounded-full bg-primary text-white">Sex</span>
                                <span class="p-2 border rounded-full bg-gray-300">S√°b</span>
                                <span class="p-2 border rounded-full bg-gray-300">Dom</span>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-sm font-medium text-gray-700">Abertura</label><input type="time" value="08:00" class="mt-1 w-full p-2 border rounded-md"></div>
                                <div><label class="block text-sm font-medium text-gray-700">Fechamento</label><input type="time" value="22:00" class="mt-1 w-full p-2 border rounded-md"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">√Åreas de Cobertura (Bairros, um por linha)</label>
                                <textarea rows="4" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2">Centro
Jardim Am√©rica
Vila Nova
Morro Branco</textarea>
                            </div>
                            <div class="flex items-center gap-4">
                                <label class="flex items-center text-sm font-medium text-gray-700"><input type="checkbox" checked class="form-checkbox h-4 w-4 text-primary rounded"> Exibir Cobertura no Totem</label>
                                <label class="flex items-center text-sm font-medium text-gray-700"><input type="checkbox" class="form-checkbox h-4 w-4 text-primary rounded"> C√°lculo Autom√°tico de Taxa (Mapa)</label>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-semibold" onclick="salvarRascunho('horarios')">Salvar Hor√°rios e Cobertura</button></div>
                    </div>
                </div>
            </div>
            
            <div id="tab-cardapio" class="tab-content" style="display: none;">
                 <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                    <h2 class="text-xl font-semibold mb-6 text-primary">Gest√£o de Itens e Estoque</h2>
                    
                    <div class="mb-4 flex justify-between items-center">
                        <h3 class="text-lg font-medium text-gray-700">Itens Atuais (28 Registros)</h3>
                        <button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition duration-150 ease-in-out">
                            + Novo Item
                        </button>
                    </div>

                    <div class="border p-4 rounded-lg bg-gray-50">
                        <h4 class="font-bold mb-4 border-b pb-2 text-primary">Editar: Pizza 4 Queijos</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div><label class="block text-sm font-medium text-gray-700">Nome</label><input type="text" value="4 Queijos" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div><label class="block text-sm font-medium text-gray-700">Pre√ßo Inteira (R$)</label><input type="number" step="0.01" value="47.00" class="mt-1 w-full p-2 border rounded-md"></div>
                            <div><label class="block text-sm font-medium text-gray-700">Pre√ßo Broto (R$)</label><input type="number" step="0.01" value="37.00" class="mt-1 w-full p-2 border rounded-md"></div>
                        </div>
                        <div class="mt-4"><label class="block text-sm font-medium text-gray-700">Ingredientes / Descri√ß√£o</label><textarea rows="2" class="mt-1 w-full p-2 border rounded-md">molho, mussarela, parmes√£o, provolone, gorgonzola, azeitona e or√©gano</textarea></div>
                        <div class="mt-6 flex justify-end space-x-3">
                            <button class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600">Excluir</button>
                            <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Salvar Item</button>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex justify-end">
                        <button class="px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-150 ease-in-out font-semibold" onclick="salvarRascunho('cardapio')">
                            üíæ Salvar Rascunho do Card√°pio
                        </button>
                    </div>
                </div>
            </div>

            <div id="tab-customizar" class="tab-content" style="display: none;">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-xl font-semibold mb-6 text-primary">üé® Visual e Layout do Totem Digital</h2>
                    
                    <div class="space-y-6">

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label for="corPrimaria" class="block text-sm font-medium text-gray-700">Cor Prim√°ria</label><input type="color" id="corPrimaria" value="#007bff" class="mt-1 block w-full h-10 border-gray-300 rounded-md"></div>
                            <div><label for="corSecundaria" class="block text-sm font-medium text-gray-700">Cor Secund√°ria</label><input type="color" id="corSecundaria" value="#ffc107" class="mt-1 block w-full h-10 border-gray-300 rounded-md"></div>
                            <div><label for="corFundo" class="block text-sm font-medium text-gray-700">Cor de Fundo</label><input type="color" id="corFundo" value="#f3f4f6" class="mt-1 block w-full h-10 border-gray-300 rounded-md"></div>
                            <div><label for="fonte" class="block text-sm font-medium text-gray-700">Fonte Padr√£o</label><input type="text" id="fonte" value="Inter" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"></div>
                        </div>

                        <div class="flex flex-wrap items-center gap-4 border-t pt-4">
                            <label class="flex items-center text-sm font-medium text-gray-700"><input type="checkbox" checked class="form-checkbox h-4 w-4 text-primary rounded"> Exibir Estoque no Totem</label>
                            <label class="flex items-center text-sm font-medium text-gray-700"><input type="checkbox" checked class="form-checkbox h-4 w-4 text-primary rounded"> Exibir Tempo Estimado</label>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-end">
                        <button class="px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-150 ease-in-out font-semibold" onclick="salvarRascunho('customizar')">
                            üíæ Salvar Layout
                        </button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        const navLinks = {
            'publicacao': 'Publica√ß√£o',
            'operacionais': 'Dados Operacionais',
            'cardapio': 'Card√°pio / Itens',
            'customizar': 'Visual e Layout'
        };

        const radialMenu = document.getElementById('radial-menu');
        const mainTitle = document.getElementById('current-title');

        // ===========================================
        // 1. L√ìGICA DO DRAG & DROP (ARR√ÅSTAVEL) - CORRIGIDO
        // ===========================================
        let isDragging = false;
        let startX, startY;
        let isClick = true; // Para diferenciar clique (abre menu) de arraste

        function getClientCoords(e) {
            if (e.touches && e.touches.length) {
                return { clientX: e.touches[0].clientX, clientY: e.touches[0].clientY };
            }
            return e;
        }

        function startDrag(e) {
            const coords = getClientCoords(e);
            
            // 1. Verifica se o clique foi no bot√£o de toggle, n√£o em um item <li>
            if (e.target.closest('li') || e.target.closest('.toggle') !== radialMenu.querySelector('.toggle')) {
                return; 
            }
            
            e.preventDefault(); // Previne a rolagem na tela (mobile)

            isDragging = true;
            isClick = true; // Assume que √© um clique, a menos que o mouse se mova
            
            radialMenu.classList.remove('active'); // Fecha o menu ao tentar arrastar
            
            const rect = radialMenu.getBoundingClientRect();
            startX = coords.clientX - rect.left;
            startY = coords.clientY - rect.top;
            
            radialMenu.style.cursor = 'grabbing';

            // Adiciona listeners ao documento para que o arraste funcione fora do elemento
            document.addEventListener('mousemove', duringDrag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchmove', duringDrag);
            document.addEventListener('touchend', endDrag);
        }

        function duringDrag(e) {
            if (!isDragging) return;
            isClick = false; // Se houve movimento, n√£o √© um clique
            e.preventDefault(); // Crucial para o arraste funcionar em mobile sem rolagem
            
            const coords = getClientCoords(e);

            let newX = coords.clientX - startX;
            let newY = coords.clientY - startY;

            // Limitar o arrasto dentro da janela vis√≠vel
            newX = Math.max(0, Math.min(newX, window.innerWidth - radialMenu.offsetWidth));
            newY = Math.max(0, Math.min(newY, window.innerHeight - radialMenu.offsetHeight));

            // Aplica as novas posi√ß√µes
            radialMenu.style.left = `${newX}px`;
            radialMenu.style.top = `${newY}px`;
            radialMenu.style.right = 'auto'; 
            radialMenu.style.bottom = 'auto';
        }

        function endDrag() {
            if (isDragging) {
                // Remove listeners adicionados no startDrag
                document.removeEventListener('mousemove', duringDrag);
                document.removeEventListener('mouseup', endDrag);
                document.removeEventListener('touchmove', duringDrag);
                document.removeEventListener('touchend', endDrag);
                
                isDragging = false;
                radialMenu.style.cursor = 'move';
            }
        }

        // Atribui os listeners de in√≠cio de arraste
        radialMenu.addEventListener('mousedown', startDrag);
        radialMenu.addEventListener('touchstart', startDrag); 


        // Posiciona o menu no canto inferior direito ao carregar
        window.addEventListener('load', () => {
            const margin = 50;
            const initialX = window.innerWidth - radialMenu.offsetWidth - margin;
            const initialY = window.innerHeight - radialMenu.offsetHeight - margin;

            radialMenu.style.left = `${initialX}px`;
            radialMenu.style.top = `${initialY}px`;
        });
        
        // ===========================================
        // 2. L√ìGICA DO MENU RADIAL (Abertura e Fechamento)
        // ===========================================

        function toggleMenu(e) {
            e.stopPropagation(); 
            // Se o evento for um arraste r√°pido (isClick=false), n√£o abre o menu
            if (isDragging && !isClick) return; 
            
            radialMenu.classList.toggle('active');
        }

        // Fun√ß√£o utilit√°ria para parar a intera√ß√£o (usada nos itens de menu)
        function stopInteraction(e) {
             e.stopPropagation(); 
        }

        // ===========================================
        // 3. L√ìGICA DAS ABAS E A√á√ïES
        // ===========================================

        function showTab(tabId, e) {
            e.stopPropagation(); // Para a propaga√ß√£o do clique do item
            
            // 1. Esconder todos os conte√∫dos 
            document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
            
            // 2. Mostrar o conte√∫do
            document.getElementById(`tab-${tabId}`).style.display = 'block';

            // 3. Atualizar o t√≠tulo
            mainTitle.textContent = navLinks[tabId];
            
            // 4. Fechar o menu
            radialMenu.classList.remove('active');
        }

        function previewTotem(e) {
            e.stopPropagation();
            window.open('../totem/index1.html', '_blank');
            radialMenu.classList.remove('active');
        }

        function salvarRascunho(secao) {
            console.log(`Dados da se√ß√£o ${secao} salvos localmente (Rascunho)`);
            alert(`‚úÖ Dados de ${secao.toUpperCase()} salvos localmente como RASCUNHO.`);
        }

        function publicarDados() {
            if (confirm("ATEN√á√ÉO: Voc√™ tem certeza que deseja SINCRONIZAR e PUBLICAR? Isso atualizar√° o Totem Digital imediatamente para todos os clientes.")) {
                console.log('SIMULA√á√ÉO: Iniciando publica√ß√£o...');
                alert('‚úÖ SUCESSO NA SIMULA√á√ÉO: Dados Serverless enviados! O Totem seria atualizado agora.');
            }
        }

        // Inicializa a aba de Publica√ß√£o ao carregar a p√°gina
        window.onload = () => showTab('publicacao', { stopPropagation: () => {} });
    </script>
</body>
                                                                                                                          </html>
