<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Card√°pio Vitorelli Final V6</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js" defer></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js" defer></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
    
    :root {
      --cor-principal: #ff3c3c; /* Vermelho Vitorelli */
      --cor-fundo-cardapio: rgba(0, 0, 0, 0.8); /* Fundo mais escuro para visibilidade */
      --cor-texto: #fff;
      --cor-botao-adicionar: #38c172;
      --clr: var(--cor-principal); 
      --bg: #fff;
      --icon-inactive: #999;
    }

    /* Base e Fundo */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family:"Poppins",sans-serif; }
    body {
      background: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgtlAIqbNWtq6dQL3X3N_TgGBe8Eul0udZm-YlzXxTFbkbo3sBrpMm6RJ3Pm76fv5PV7rgEGEYSkA_1l_8bJ6AA-YnRZWrtHW1m1PjLsH_Wpjb-FCto68f_a-bJc-sysKvbkXIkASwWP6N3PffP1QDwRY97RHrYiFj_cD2O1MorFgqpYwojgAZeks8pws0O/s2400/20250927_014811.jpg') no-repeat center center fixed;
      background-size: cover;
      color: var(--cor-texto);
      padding-bottom: 90px; /* Espa√ßo para o menu fixo inferior */
    }

    /* Header e Logo - Novo Layout [ (Log) - Card√°pio - (?) ] */
    header { 
      text-align: center; 
      padding: 15px 20px; 
      background: rgba(0, 0, 0, 0.8); 
      border-bottom: 2px solid var(--cor-principal);
      position: sticky;
      top: 0;
      z-index: 1000;
      display: flex; /* Habilita o Flexbox */
      align-items: center; 
      justify-content: space-between; /* Distribui os elementos */
    }
    header .logo-container {
        display: flex;
        align-items: center;
    }
    header img {
      width: 50px; /* Logo menor */
      height: 50px;
      border-radius: 50%;
      box-shadow: 0 0 8px var(--cor-principal);
      object-fit: cover;
      content: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgIVywerTEx7Qorio908b4OTVv3x2yo2lPl38CVdhCxtJOK23tK_pRTy8-hcSIWtNLZ6ifuzf8WhXOmFqBkr2aOqR78JmGc_Wc5uRLHtLUAYenxGd26uMjEg5E0bMKp03cqXDwXuJ7yA_0LXYoUxIn6ye7Vn6Q5CnTv-oPnLAMz58zVaijoADv3cRQM5T3L/s1600/20250614_012036.png');
    }
    header h1 {
      color: var(--cor-principal);
      font-size: 1.4em; /* T√≠tulo menor */
      margin-top: 0;
      margin-left: 10px; /* Espa√ßo entre logo e t√≠tulo */
      text-shadow: 1px 1px 3px #000;
    }
    .header-placeholder {
        width: 30px; /* Tamanho do Placeholder '?' */
        height: 30px;
        background: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5em;
        color: var(--cor-principal);
        cursor: pointer;
    }
    
    /* Layout */
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
      padding: 20px;
      max-width: 1400px; 
      margin: 0 auto;
    }

    /* T√≠tulos e Subnavega√ß√£o */
    #sabores h2 {
        color: var(--cor-principal);
        text-align: center;
        margin-bottom: 20px;
        font-size: 1.8em;
    }
    .subnav {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 25px;
        width: 100%;
        max-width: 450px;
        margin-left: auto;
        margin-right: auto;
    }
    .subnav button {
        background: rgba(255, 255, 255, 0.1);
        color: var(--cor-texto);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        flex-grow: 1;
    }
    .subnav button.active {
        background-color: var(--cor-principal);
        color: var(--cor-texto);
        box-shadow: 0 0 10px rgba(255, 60, 60, 0.5);
    }
    
    /* Carrossel Swiper 3D */
    .swiper {
        width: 100%;
        height: 450px; 
        padding-top: 50px;
        padding-bottom: 50px;
    }
    .swiper-slide {
      background: var(--cor-fundo-cardapio); 
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6); 
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      width: 320px; 
      height: 350px;
      border-radius: 15px;
      overflow: hidden;
      text-align: center;
    }
    .swiper-slide h4 {
        color: var(--cor-principal);
        font-size: 1.6em;
    }
    .swiper-slide p {
        color: #ccc;
        flex-grow: 1;
        font-size: 0.9em;
        line-height: 1.3;
        margin: 5px 0 15px 0;
    }
    .swiper-slide button {
      background-color: var(--cor-botao-adicionar);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 10px;
    }
    
    /* Estilo para imagens no slide */
    .swiper-slide .item-image {
        max-width: 80%;
        max-height: 120px; 
        height: auto;
        margin: 10px auto;
        display: block;
        object-fit: contain;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
    }

    /* Menu de Navega√ß√£o (Inferior) */
    .navigation {
      width: 100%; 
      height: 80px; 
      background: var(--bg); 
      position: fixed; 
      bottom: 0; 
      left: 0;
      box-shadow: 0 -5px 20px rgba(0,0,0,.3); 
      z-index: 2000;
      display: flex; 
      align-items: center; 
      justify-content: center;
    }
    /* Estilos de Menu/Carrinho (Mantidos e ajustados para z-index) */
    .navigation ul {
        display: flex;
        width: 100%;
        max-width: 700px;
        list-style: none;
        justify-content: space-around;
        padding: 0 10px;
    }
    .navigation ul li {
        position: relative;
        width: 60px;
        height: 60px;
        list-style: none;
        z-index: 10;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .navigation ul li a {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        width: 100%;
        text-align: center;
        font-weight: 500;
        text-decoration: none;
    }
    .navigation ul li a .icon {
        position: relative;
        display: block;
        line-height: 65px;
        font-size: 1.5em;
        text-align: center;
        transition: 0.5s;
        color: var(--icon-inactive);
    }
    .navigation ul li.active a .icon {
        transform: translateY(-25px);
        color: var(--clr);
        filter: drop-shadow(0 0 5px var(--clr));
    }
    .navigation ul li a .text {
        position: absolute;
        color: var(--clr);
        font-weight: 400;
        font-size: 0.75em;
        letter-spacing: 0.05em;
        transition: 0.5s;
        opacity: 0;
        transform: translateY(20px);
    }
    .navigation ul li.active a .text {
        opacity: 1;
        transform: translateY(10px);
    }
    .navigation ul li:nth-child(6) { /* Carrinho */
        width: 80px; 
    }
    
    /* Estilos do carrinho (modal) */
    #carrinho-lateral {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 3500; 
        display: none; 
        justify-content: center;
        align-items: center;
    }
    #carrinho-conteudo {
        background: #f8f8f8;
        padding: 25px;
        border-radius: 15px;
        color: #333;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        position: relative;
        max-height: 90vh;
        overflow-y: auto;
    }
    #carrinho-lista {
        list-style: none;
        padding: 0;
        max-height: 200px;
        overflow-y: auto;
        border-bottom: 1px solid #ddd;
        margin-bottom: 15px;
    }
    #carrinho-lista li {
        padding: 8px 0;
        border-top: 1px solid #eee;
    }
    #resumo-valores h4 {
        color: var(--cor-principal);
        font-size: 1.5em;
        margin-top: 10px;
    }
    #taxa-entrega-row {
        display: flex;
        justify-content: space-between;
    }
    .botao-whatsapp {
      background-color: var(--cor-botao-adicionar);
      color: #fff;
      border: none;
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      font-size: 1.1em;
      transition: background-color 0.2s;
    }
    .botao-whatsapp:hover {
        background-color: #31a361;
    }
  </style>
  </head>
<body>

  <header>
    <div class="logo-container">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgIVywerTEx7Qorio908b4OTVv3x2yo2lPl38CVdhCxtJOK23tK_pRTy8-hcSIWtNLZ6ifuzf8WhXOmFqBkr2aOqR78JmGc_Wc5uRLHtLUAYenxGd26uMjEg5E0bMKp03cqXDwXuJ7yA_0LXYoUxIn6ye7Vn6Q5CnTv-oPnLAMz58zVaijoADv3cRQM5T3L/s1600/20250614_012036.png" alt="Logo Pizzaria Vitorelli">
        <h1>Card√°pio Digital</h1>
    </div>
    <div class="header-placeholder" onclick="showCustomAlert('Ajuda e Informa√ß√µes', 'Clique nos √≠cones do menu inferior para navegar entre Pizzas, Brotos, Calzones, Bebidas e o Carrinho de Pedidos.')">
      <ion-icon name="help-circle-outline"></ion-icon>
    </div>
  </header>
  
  <div class="main-content">
    
    <div id="sabores" style="flex: 1; width: 100%;">
      <h2>Pizzas - Inteira</h2>
      
      <div class="subnav">
        <button id="btn-inteira" class="active" onclick="mostrar('inteira', this)">üçï Inteira</button>
        <button id="btn-meia" onclick="mostrar('meia', this)">‚úÇÔ∏è Meia-a-meia</button>
      </div>

      <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="carousel-wrapper">
          </div>
      </div>
    </div>
  </div>

  <div id="carrinho-lateral">
    <div id="carrinho-conteudo">
        <button id="fecharCarrinho" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 1.5em; color: #555; cursor: pointer;" onclick="toggleCarrinho(false)">X</button>
        <h3 style="color:var(--cor-principal); margin-bottom: 15px;">üõí Resumo do Pedido</h3>
        
        <div id="carrinho-detalhes">
            <ul id="carrinho-lista">
                <li id="empty-cart-message">O carrinho est√° vazio.</li>
            </ul>
        </div>
        
        <div id="resumo-valores">
            <p>Subtotal: <span id="subtotal">R$ 0,00</span></p>
            <p id="taxa-entrega-row" style="display:none; justify-content: space-between;">Taxa de Entrega: <span id="taxa-entrega">R$ 0,00</span></p>
            <h4>Total: <span id="total-final">R$ 0,00</span></h4>
        </div>
        
        <div id="opcoes-pedido">
          <label for="entrega" style="display: block; margin-top: 15px; font-weight: bold;">Op√ß√£o de Servi√ßo:</label>
          <select id="entrega" onchange="atualizarOpcoesEntrega()" style="width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ddd;">
            <option value="Delivery">Delivery (Entrega)</option>
            <option value="Retirar">Retirar no Local</option>
          </select>

          <div id="delivery-options" class="opcoes-grupo" style="margin-top: 10px;">
            <input type="text" id="endereco" placeholder="Seu Endere√ßo e N√∫mero" required style="width: 100%; padding: 8px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ddd;">
            <select id="bairro" onchange="renderizarCarrinho()" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
              <option value="">Selecione o Bairro</option>
              <option value="Centro">Centro (R$ 3,00)</option>
              <option value="Vila Nova">Vila Nova (R$ 3,00)</option>
              <option value="JD. Bom Jesus">JD. Bom Jesus (R$ 3,00)</option>
              <option value="Ch√°cara Boa Vista">Ch√°cara Boa Vista (R$ 3,00)</option>
              <option value="Parque das Avencas">Parque das Avencas (R$ 3,00)</option>
              <option value="Morro Branco">Morro Branco (R$ 4,00)</option>
              <option value="Paiol/KM 50">Paiol/KM 70 (R$ 7,00)</option>
              <option value="Green Hills">Green Hills (R$ 10,00)</option>
              <option value="Trailer Club Gaivota">Trailer Club Gaivota (R$ 10,00)</option>
            </select>
          </div>

          <label for="pagamento" style="display: block; margin-top: 15px; font-weight: bold;">Forma de Pagamento:</label>
          <select id="pagamento" onchange="atualizarOpcoesTroco()" style="width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ddd;">
            <option value="Pix">Pix</option>
            <option value="Cartao">Cart√£o (Cr√©dito/D√©bito)</option>
            <option value="Dinheiro">Dinheiro</option>
          </select>
          
          <div id="troco-options" class="opcoes-grupo" style="display:none; margin-top: 10px;">
            <label for="precisaTroco" style="display: block; font-weight: bold; margin-bottom: 5px;">Precisa de Troco?</label>
            <select id="precisaTroco" onchange="exibirValorTroco()" style="width: 100%; padding: 8px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ddd;">
              <option value="Nao">N√£o</option>
              <option value="Sim">Sim</option>
            </select>
            <input type="number" id="valorTroco" placeholder="Troco para qual valor?" style="display:none; width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
          </div>
        </div>
        
        <button onclick="enviarPedido()" class="botao-whatsapp">
          Enviar Pedido (WhatsApp)
        </button>
    </div>
  </div>

  <div id="toast-notification"></div>

  <div id="custom-alert-overlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 4000; justify-content: center; align-items: center;">
    <div id="custom-alert-box" style="background: white; padding: 25px; border-radius: 10px; max-width: 80%; text-align: center; color: #333;">
      <h4 id="custom-alert-title" style="color: var(--cor-principal); margin-bottom: 10px;"></h4>
      <p id="custom-alert-message" style="margin-bottom: 15px;"></p>
      <button onclick="document.getElementById('custom-alert-overlay').style.display='none'" style="background: var(--cor-principal); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">OK</button>
    </div>
  </div>
  
  <nav class="navigation">
    <ul id="main-nav-list">
      <li class="active" data-categoria="pizza">
        <a href="#" onclick="event.preventDefault(); selecionar('pizza'); activateNav(this);">
          <span class="icon"><ion-icon name="pizza-outline"></ion-icon></span>
          <span class="text">Pizzas</span>
        </a>
      </li>
      <li data-categoria="broto">
        <a href="#" onclick="event.preventDefault(); selecionar('broto'); activateNav(this);">
          <span class="icon"><ion-icon name="cut-outline"></ion-icon></span> <span class="text">Brotos</span>
        </a>
      </li>
      <li data-categoria="calzone">
        <a href="#" onclick="event.preventDefault(); selecionar('calzone'); activateNav(this);">
          <span class="icon"><ion-icon name="cube-outline"></ion-icon></span>
          <span class="text">Calzone</span>
        </a>
      </li>
      <li data-categoria="bebidas">
        <a href="#" onclick="event.preventDefault(); selecionar('bebidas'); activateNav(this);">
          <span class="icon"><ion-icon name="bottle-outline"></ion-icon></span> <span class="text">Bebidas</span>
        </a>
      </li>
      <li data-categoria="ingredientes">
        <a href="#" onclick="event.preventDefault(); selecionar('ingredientes'); activateNav(this);">
          <span class="icon"><ion-icon name="leaf-outline"></ion-icon></span>
          <span class="text">Extras</span>
        </a>
      </li>
      <li data-categoria="carrinho">
        <a href="#" onclick="event.preventDefault(); toggleCarrinho(true); activateNav(this);">
          <span class="icon"><ion-icon name="fast-food-outline"></ion-icon></span> <span class="text">Carrinho</span>
        </a>
      </li>
    </ul>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script>
    let categoriaAtual = 'pizza';
    let modoMeia = false;
    let saboresSelecionadosMeia = [];
    let mySwiper = null; 
    let carrinhoItens = []; 

    // DADOS DO CARD√ÅPIO (ATUALIZADOS E COMPLETOS)
    const cardapio = {
      pizza: [
        { 
          nome: '4 Queijos', 
          precoInteira: 47.00, 
          precoBroto: 37.00, 
          ingredientes: 'molho, mussarela, parmes√£o, provolone, gorgonzola, azeitona e or√©gano',
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg1v7SvnOcwHHkrI_kA8IcE3s4p-_GHbv725ne7hKm5M48nd_asbsZZrWKs3Kfo6rj5O3kh6P2J-WkJhxjqBUhrcp6FnYV4agrnKc5W41ZrYq3aytU_iRfF1FJxwCgN9MfATSd1BbRTaL77kbLswzqslfn2xuB-aKTZ3Cs3HrpI7AouquBNIPUpP56hUhsJ/s1000/16195-heineken-lata-269ml-normal-8un.20250923144026.png'
        },
        { 
          nome: '5 Queijos', 
          precoInteira: 49.00, 
          precoBroto: 39.00, 
          ingredientes: 'molho, mussarela, parmes√£o, provolone, gorgonzola, catupiry, azeitona e or√©gano',
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhGLREGHN-MyUOkhZn8kkpY9EojpZ3MJaddE_uPm65r3ALsVfRaAk1jRANRwZnG5fFviR2lP_9ARDnN6gCnLAViEvL_FqSxEtdzqr2r-tuAN8mYUpY10W0XJ-W-yXHSce2d_QxA9Qd04x-FzD0qEEMTqJQliuU6042pmWO0I6vcGtGgsGZUCZO6xE6nloYA/s424/Clipped_image_20251009_052602.png'
        },
        { nome: 'Abobrinha I', precoInteira: 41.00, precoBroto: 34.00, ingredientes: 'molho, mussarela, abobrinha, alho frito, azeitona e or√©gano', imagem: '' },
        { nome: 'Abobrinha II', precoInteira: 41.00, precoBroto: 34.00, ingredientes: 'molho, mussarela, abobrinha, pimenta calabresa, azeitona e or√©gano', imagem: '' },
        { nome: 'Alho', precoInteira: 45.00, precoBroto: 35.00, ingredientes: 'molho, mussarela, alho frito, azeitona e or√©gano', imagem: '' },
        { nome: 'Aliche', precoInteira: 49.00, precoBroto: 39.00, ingredientes: 'molho, mussarela, aliche, tomate, azeitona e or√©gano', imagem: '' },
        { nome: 'Americana', precoInteira: 50.00, precoBroto: 40.00, ingredientes: 'molho, mussarela, lombinho, piment√£o, champignon, tomate cereja, azeitona sem caro√ßo e or√©gano', imagem: '' },
        { nome: 'Atum I', precoInteira: 46.00, precoBroto: 36.00, ingredientes: 'molho, atum, cebola, azeitona e or√©gano', imagem: '' },
        { nome: 'Atum II (com mussarela)', precoInteira: 48.00, precoBroto: 38.00, ingredientes: 'molho, mussarela, atum, cebola, azeitona e or√©gano', imagem: '' },
        { nome: 'Bacon', precoInteira: 44.00, precoBroto: 38.00, ingredientes: 'molho, mussarela, bacon, azeitona e or√©gano', imagem: '' },
        { nome: 'Br√≥colis', precoInteira: 47.00, precoBroto: 38.00, ingredientes: 'molho, br√≥colis, mussarela, bacon, azeitona e or√©gano', imagem: '' },
        { nome: 'Calabresa I', precoInteira: 38.00, precoBroto: 29.00, ingredientes: 'molho, calabresa, tomate, cebola, azeitona e or√©gano', imagem: '' },
        { nome: 'Calabresa II', precoInteira: 43.00, precoBroto: 34.00, ingredientes: 'molho, mussarela, calabresa, cebola, azeitona e or√©gano', imagem: '' },
        { nome: 'Frango Catupiry', precoInteira: 47.00, precoBroto: 37.00, ingredientes: 'molho, frango, catupiry, azeitona e or√©gano', imagem: '' },
        { nome: 'G√™nova', precoInteira: 48.00, precoBroto: 37.00, ingredientes: 'molho, mussarela, provolone, presunto, molho pesto e azeitona', imagem: '' },
        { nome: 'Lombinho', precoInteira: 46.00, precoBroto: 36.00, ingredientes: 'molho, mussarela, lombinho, provolone, azeitona e or√©gano', imagem: '' },
        { nome: 'Marguerita', precoInteira: 40.00, precoBroto: 30.00, ingredientes: 'molho, mussarela, parmes√£o, tomate, azeitona e manjeric√£o', imagem: '' },
        { nome: 'Mussarela', precoInteira: 38.00, precoBroto: 29.00, ingredientes: 'molho, mussarela, tomate, azeitona e or√©gano', imagem: '' },
        { nome: 'Peperonni', precoInteira: 49.00, precoBroto: 39.00, ingredientes: 'molho, mussarela, peperonni e azeitona', imagem: '' },
        { nome: 'Pomodoro', precoInteira: 44.00, precoBroto: 34.00, ingredientes: 'molho, parmes√£o, alho frito, tomate e or√©gano', imagem: '' },
        { nome: 'Potatosa', precoInteira: 45.00, precoBroto: 35.00, ingredientes: 'molho, batata, parmes√£o, calabresa, catupiry, azeitona sem caro√ßo e or√©gano', imagem: '' },
        { nome: 'Portuguesa', precoInteira: 50.00, precoBroto: 40.00, ingredientes: 'molho, mussarela, presunto, ovo cozido, ervilha, tomate, azeitona sem caro√ßo e or√©gano', imagem: '' },
        { nome: 'R√∫cula e Tomate Seco', precoInteira: 46.00, precoBroto: 36.00, ingredientes: 'molho, mussarela, r√∫cula, tomate seco, azeitona e or√©gano', imagem: '' },
        { nome: 'Toscana', precoInteira: 45.00, precoBroto: 35.00, ingredientes: 'molho, mussarela, lingui√ßa calabresa mo√≠da, tomate, azeitona e or√©gano', imagem: '' },
        // Pizzas Doces/Especiais
        { nome: 'Anita e Garibaldi', precoInteira: 45.00, precoBroto: 35.00, ingredientes: 'parmes√£o e goiabada', imagem: '' },
        { nome: 'Banana', precoInteira: 41.00, precoBroto: 31.00, ingredientes: 'banana, a√ß√∫car, doce de leite e canela', imagem: '' },
      ],
      // Broto e Calzone usam a lista de pizzas, mas o pre√ßo Broto/Calzone (precoBroto)
      broto: null, 
      calzone: null, 
      bebidas: [
        { 
          nome: 'Coca-Cola 2L', 
          preco: 18.00, 
          ingredientes: 'Refrigerante', 
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg73_umj1G0CDt2HKB0pbp-uZM1biesihbgshH1vxwn62XtpHt2fPcNK38vX0OUjSLzhdA0TdW0VP5nd6IJmxNvKzJDo6YrE5dTw94RN0cu4fCfFl520Sc5E2D1lzU-GSvrOdV1EKx-c0nZF6_FhOa5ch1K5O8BrC2K4v14gbfY14CQt8YYGrfqLWIOXn9p/s800/930238-800-auto.png'
        },
        { 
          nome: 'Coca-Cola Zero 2L', 
          preco: 18.00, 
          ingredientes: 'Refrigerante', 
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg73_umj1G0CDt2HKB0pbp-uZM1biesihbgshH1vxwn62XtpHt2fPcNK38vX0OUjSLzhdA0TdW0VP5nd6IJmxNvKzJDo6YrE5dTw94RN0cu4fCfFl520Sc5E2D1lzU-GSvrOdV1EKx-c0nZF6_FhOa5ch1K5O8BrC2K4v14gbfY14CQt8YYGrfqLWIOXn9p/s800/930238-800-auto.png'
        },
        { 
          nome: 'Guaran√° Antarctica 2L', 
          preco: 18.00, 
          ingredientes: 'Refrigerante',
          imagem: '' 
        }, 
        { 
          nome: 'Guaran√° Kuat 2L', 
          preco: 12.00, 
          ingredientes: 'Refrigerante',
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhGLREGHN-MyUOkhZn8kkpY9EojpZ3MJaddE_uPm65r3ALsVfRaAk1jRANRwZnG5fFviR2lP_9ARDnN6gCnLAViEvL_FqSxEtdzqr2r-tuAN8mYUpY10W0XJ-W-yXHSce2d_QxA9Qd04x-FzD0qEEMTqJQliuU6042pmWO0I6vcGtGgsGZUCZO6xE6nloYA/s424/Clipped_image_20251009_052602.png'
        },
        { 
          nome: 'HEINEKEN', 
          preco: 8.00, 
          ingredientes: 'Cerveja',
          imagem: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg1v7SvnOcwHHkrI_kA8IcE3s4p-_GHbv725ne7hKm5M48nd_asbsZZrWKs3Kfo6rj5O3kh6P2J-WkJhxjqBUhrcp6FnYV4agrnKc5W41ZrYq3aytU_iRfF1FJxwCgN9MfATSd1BbRTaL77kbLswzqslfn2xuB-aKTZ3Cs3HrpI7AouquBNIPUpP56hUhsJ/s1000/16195-heineken-lata-269ml-normal-8un.20250923144026.png'
        },
      ],
      ingredientes: [
        { nome: 'Ingrediente Extra: Bacon', preco: 5.00, ingredientes: 'Adicione bacon extra ao seu pedido.', imagem: '' },
        { nome: 'Borda Recheada: Catupiry', preco: 8.00, ingredientes: 'Borda com recheio de Catupiry original.', imagem: '' },
        { nome: 'Borda Recheada: Chocolate', preco: 10.00, ingredientes: 'Borda recheada com chocolate.', imagem: '' },
      ]
    };

    // ===================================================
    // FUN√á√ïES DE EXIBI√á√ÉO E NAVEGA√á√ÉO
    // ===================================================

    function selecionar(categoria) {
      toggleCarrinho(false); 
      document.querySelector('.main-content').scrollIntoView({ behavior: 'smooth' });
      
      categoriaAtual = categoria;
      const subnav = document.querySelector('.subnav');
      
      // Habilita ou desabilita os bot√µes Inteira/Meia
      if (categoria === 'pizza' || categoria === 'broto') {
        subnav.style.display = 'flex';
        document.getElementById('btn-inteira').classList.add('active');
        document.getElementById('btn-meia').classList.remove('active');
        mostrar('inteira');
      } else {
        subnav.style.display = 'none'; 
        mostrar('inteira'); // 'inteira' √© s√≥ um nome de tipo, n√£o implica pizza inteira aqui
      }
    }

    function mostrar(tipo, element) {
        // Verifica se a categoria atual suporta Meia-a-meia
        const suportaMeia = categoriaAtual === 'pizza' || categoriaAtual === 'broto';
        modoMeia = suportaMeia && tipo === 'meia';

        const carouselWrapper = document.getElementById('carousel-wrapper');
        carouselWrapper.innerHTML = ''; 
        saboresSelecionadosMeia = [];

        if (element) {
            document.querySelectorAll('.subnav button').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
        }

        // Atualiza o T√≠tulo
        let titleElement = document.getElementById('sabores').querySelector('h2');
        let baseTitle = categoriaAtual.charAt(0).toUpperCase() + categoriaAtual.slice(1);
        
        if (suportaMeia) {
            baseTitle = (categoriaAtual === 'broto' ? 'Brotos' : 'Pizzas');
            titleText = `${baseTitle} - ${modoMeia ? 'Meia-a-meia' : (categoriaAtual === 'broto' ? 'Broto (Inteira)' : 'Inteira')}`;
        } else if (categoriaAtual === 'calzone') {
            titleText = `Calzone (Op√ß√µes de Pizza)`;
        } else {
            titleText = baseTitle;
        }
        titleElement.textContent = titleText;


        // Determina a lista de itens a exibir
        let itensDaCategoria = [];
        if (categoriaAtual === 'broto' || categoriaAtual === 'calzone' || categoriaAtual === 'pizza') {
            itensDaCategoria = cardapio.pizza;
        } else {
            itensDaCategoria = cardapio[categoriaAtual] || [];
        }
        
        itensDaCategoria.forEach(item => {
            let precoInteira = item.precoInteira || 0;
            let precoBroto = item.precoBroto || 0;
            let precoOutro = item.preco || 0;

            let precoExibido = precoInteira; 

            if (categoriaAtual === 'broto' || categoriaAtual === 'calzone') {
                precoExibido = precoBroto; 
            } else if (categoriaAtual === 'bebidas' || categoriaAtual === 'ingredientes') {
                precoExibido = precoOutro; 
            }
            
            // L√≥gica para Imagem
            const itemImage = item.imagem ? `<img src="${item.imagem}" alt="${item.nome}" class="item-image">` : '';

            // Ajusta o texto do bot√£o
            let buttonText = 'Adicionar';
            if (suportaMeia && modoMeia) {
                buttonText = 'Escolher 1/2';
            } else if (categoriaAtual === 'ingredientes') {
                buttonText = 'Adicionar Extra';
            }
            
            // Passa todos os pre√ßos para a fun√ß√£o adicionar, que decide qual usar
            const slideHTML = `
                <div class="swiper-slide">
                    <div>
                        <h4>${item.nome}</h4>
                        ${itemImage}
                        <p>${item.ingredientes}</p>
                    </div>
                    <div>
                        <span class="preco">R$ ${precoExibido.toFixed(2)}</span>
                        <button onclick="adicionar('${item.nome}', ${precoInteira}, ${precoBroto}, ${precoOutro})">
                            ${buttonText}
                        </button>
                    </div>
                </div>
            `;
            carouselWrapper.innerHTML += slideHTML;
        });

        // REINICIALIZA√á√ÉO DO SWIPER
        if (mySwiper) {
            mySwiper.destroy(true, true);
        }
        
        setTimeout(() => {
            mySwiper = new Swiper(".mySwiper", {
                effect: "coverflow",
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: "auto",
                coverflowEffect: {
                    rotate: 30,
                    stretch: 0,
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                },
                loop: true,
            });
        }, 100); 
    }

    function adicionar(nome, precoInteira, precoBroto, precoOutro) {
      
      const isMeia = categoriaAtual === 'pizza' || categoriaAtual === 'broto';

      if (isMeia && modoMeia) {
        // Usa o pre√ßo de Broto se a categoria for Broto, sen√£o usa o de Pizza
        const precoBase = categoriaAtual === 'broto' ? precoBroto : precoInteira; 

        // L√≥gica Meia-a-meia
        if (saboresSelecionadosMeia.length < 2) {
          saboresSelecionadosMeia.push({ nome, preco: precoBase }); 
          showToast(`Sabor ${nome} adicionado! Escolha o segundo sabor.`);
          
          if (saboresSelecionadosMeia.length === 2) {
            const [sabor1, sabor2] = saboresSelecionadosMeia;
            const precoFinal = Math.max(sabor1.preco, sabor2.preco);
            const tipoItem = categoriaAtual === 'broto' ? 'Broto Meia-a-meia' : 'Pizza Meia-a-meia';
            
            carrinhoItens.push({ 
                nome: `1/2 ${sabor1.nome} & 1/2 ${sabor2.nome}`, 
                preco: precoFinal, 
                tipo: tipoItem, 
                qtde: 1 
            });
            renderizarCarrinho();
            showToast(`Meia ${sabor1.nome} e Meia ${sabor2.nome} (${tipoItem}) adicionadas. Total: R$ ${precoFinal.toFixed(2)}.`);
            saboresSelecionadosMeia = [];
            toggleCarrinho(true); 
          }
        }
      } 
      else {
        // L√≥gica de item √∫nico
        let tipoItem = categoriaAtual.charAt(0).toUpperCase() + categoriaAtual.slice(1);
        let preco = 0; 
        
        if (categoriaAtual === 'pizza') {
            preco = precoInteira; 
        } else if (categoriaAtual === 'broto') {
            preco = precoBroto; 
            tipoItem = 'Broto';
        } else if (categoriaAtual === 'calzone') {
            preco = precoBroto; 
            tipoItem = 'Calzone';
        } else if (categoriaAtual === 'bebidas') {
             preco = precoOutro; 
             tipoItem = 'Bebida';
        } else if (categoriaAtual === 'ingredientes') {
             preco = precoOutro; 
             tipoItem = 'Extra';
        }

        carrinhoItens.push({ 
            nome: nome, 
            preco: preco, 
            tipo: tipoItem, 
            qtde: 1 
        });
        renderizarCarrinho();
        showToast(`${nome} (${tipoItem}) adicionado(a). R$ ${preco.toFixed(2)}.`);
      }
    }
    
    // ===================================================
    // L√ìGICA DO CARRINHO (MODAL) E UTILS
    // ===================================================

    function renderizarCarrinho() {
        const lista = document.getElementById('carrinho-lista');
        const subtotalSpan = document.getElementById('subtotal');
        const totalSpan = document.getElementById('total-final');
        const taxaRow = document.getElementById('taxa-entrega-row');
        const taxaSpan = document.getElementById('taxa-entrega');

        let subtotal = 0;
        let taxaEntrega = 0;
        const entrega = document.getElementById('entrega').value;
        const bairro = document.getElementById('bairro').value;

        lista.innerHTML = '';
        if (carrinhoItens.length === 0) {
            lista.innerHTML = '<li id="empty-cart-message" style="text-align: center; color: #777;">O carrinho est√° vazio.</li>';
        } else {
            carrinhoItens.forEach((item, index) => {
                const li = document.createElement('li');
                li.style.display = 'flex';
                li.style.justifyContent = 'space-between';
                li.style.alignItems = 'center';
                li.innerHTML = `
                    <div style="flex: 1;">
                        <span style="font-weight: bold;">${item.nome}</span> 
                        <br><small style="color:#777;">(${item.tipo})</small>
                    </div>
                    <div style="flex-shrink: 0; display: flex; align-items: center;">
                        <span style="font-weight: bold; margin-right: 10px;">R$ ${item.preco.toFixed(2)}</span>
                        <button onclick="removerItem(${index})" style="background: var(--cor-principal); color: #fff; border: none; padding: 2px 5px; cursor: pointer; border-radius: 3px; font-size: 0.8em; line-height: 1;">X</button>
                    </div>
                `;
                lista.appendChild(li);
                subtotal += item.preco;
            });
        }
        
        if (entrega === 'Delivery' && subtotal > 0 && bairro) {
            taxaEntrega = calcularTaxa(bairro);
            taxaRow.style.display = 'flex'; 
        } else {
            taxaEntrega = 0;
            taxaRow.style.display = 'none'; 
        }

        const totalFinal = subtotal + taxaEntrega;
        
        subtotalSpan.textContent = `R$ ${subtotal.toFixed(2)}`;
        taxaSpan.textContent = `R$ ${taxaEntrega.toFixed(2)}`;
        totalSpan.textContent = `R$ ${totalFinal.toFixed(2)}`;
    }

    function removerItem(index) {
        carrinhoItens.splice(index, 1);
        renderizarCarrinho();
        showToast('Item removido do carrinho.');
    }

    function toggleCarrinho(show) {
        const carrinho = document.getElementById('carrinho-lateral');
        if (show) {
            renderizarCarrinho();
            carrinho.style.display = 'flex'; 
        } else {
            carrinho.style.display = 'none'; 
        }
    }

    function showToast(message) {
        const toast = document.getElementById('toast-notification');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }
    
    function atualizarOpcoesEntrega() {
      const entrega = document.getElementById('entrega').value;
      const deliveryOptions = document.getElementById('delivery-options');
      
      if (entrega === 'Delivery') {
        deliveryOptions.style.display = 'block';
      } else {
        deliveryOptions.style.display = 'none';
      }
      renderizarCarrinho(); 
    }

    function calcularTaxa(bairro) {
        let taxa = 0;
        switch(bairro) {
            case 'Centro': case 'Vila Nova': case 'JD. Bom Jesus': case 'Ch√°cara Boa Vista': case 'Parque das Avencas':
                taxa = 3; break;
            case 'Morro Branco':
                taxa = 4; break;
            case 'Paiol/KM 50':
                taxa = 7; break;
            case 'Green Hills': case 'Trailer Club Gaivota':
                taxa = 10; break;
        }
        return taxa;
    }

    function atualizarOpcoesTroco() {
      const pagamento = document.getElementById('pagamento').value;
      const trocoOptions = document.getElementById('troco-options');
      if (pagamento === 'Dinheiro') {
        trocoOptions.style.display = 'block';
        exibirValorTroco(); 
      } else {
        trocoOptions.style.display = 'none';
      }
    }

    function exibirValorTroco() {
      const precisaTroco = document.getElementById('precisaTroco').value;
      const valorTrocoInput = document.getElementById('valorTroco');
      if (precisaTroco === 'Sim') {
        valorTrocoInput.style.display = 'block';
        valorTrocoInput.required = true;
      } else {
        valorTrocoInput.style.display = 'none';
        valorTrocoInput.required = false;
      }
    }

    function enviarPedido() {
      if (carrinhoItens.length === 0) {
        showCustomAlert('Aten√ß√£o', 'Seu carrinho est√° vazio. Adicione itens antes de enviar o pedido.');
        return;
      }

      const entrega = document.getElementById('entrega').value;
      const pagamento = document.getElementById('pagamento').value;
      
      let msg = `üçï *Pedido Vitorelli - ${new Date().toLocaleDateString('pt-BR')}* üçï\n\n`;
      msg += `üõí *ITENS SELECIONADOS:*\n`;
      
      let subtotal = 0;
      carrinhoItens.forEach(item => {
          msg += `- ${item.nome} (${item.tipo}): R$ ${item.preco.toFixed(2)}\n`;
          subtotal += item.preco;
      });
      
      msg += `\n========================\n`;
      msg += `‚úÖ *SERVI√áO: ${entrega}*\n`;

      let taxa = 0;

      if (entrega === 'Delivery') {
        const endereco = document.getElementById('endereco').value.trim();
        const bairro = document.getElementById('bairro').value;
        
        if (!endereco || !bairro) {
          showCustomAlert('Erro', 'Por favor, preencha o Endere√ßo e selecione o Bairro para Delivery.');
          return;
        }
        
        taxa = calcularTaxa(bairro);
        msg += `\nüìç Endere√ßo: ${endereco}\nüèòÔ∏è Bairro: ${bairro}\nüöö Taxa de entrega: R$ ${taxa.toFixed(2)}\n`;
      } else {
        msg += `\nüßë‚Äçüç≥ Pronto para Retirada no Local.\n`;
      }
      
      const totalFinal = subtotal + taxa;
      
      msg += `\nüí≥ *PAGAMENTO: ${pagamento}*\n`;

      if (pagamento === 'Dinheiro') {
        const precisaTroco = document.getElementById('precisaTroco').value;
        msg += `Troco: ${precisaTroco}`; 
        if (precisaTroco === 'Sim') {
          const valorTroco = document.getElementById('valorTroco').value.trim();
          if (!valorTroco || isNaN(parseFloat(valorTroco))) {
            showCustomAlert('Erro', 'Por favor, informe o valor para o troco em Dinheiro.');
            return;
          }
          msg += ` para R$ ${parseFloat(valorTroco).toFixed(2)}`;
        }
        msg += `\n`;
      }
      
      msg += `\nüí∞ *SUBTOTAL: R$ ${subtotal.toFixed(2)}*\n`;
      if (entrega === 'Delivery') {
          msg += `üöö *TAXA: R$ ${taxa.toFixed(2)}*\n`;
      }
      msg += `üî• *TOTAL GERAL: R$ ${totalFinal.toFixed(2)}*\n`;
      msg += `\n========================\n`;
      msg += `*Agradecemos a prefer√™ncia!*`;

      const numero = '5511993407322'; // N√∫mero de exemplo
      const texto = encodeURIComponent(msg);
      window.open(`https://wa.me/${numero}?text=${texto}`, '_blank');
    }


    function activateNav(element) {
        const list = document.querySelectorAll('.navigation ul li');
        list.forEach(item => item.classList.remove('active'));
        element.parentElement.classList.add('active');
    }

    function showCustomAlert(title, message) {
      document.getElementById('custom-alert-title').innerText = title;
      document.getElementById('custom-alert-message').innerText = message;
      document.getElementById('custom-alert-overlay').style.display = 'flex';
    }

    window.onload = function() {
      atualizarOpcoesEntrega();
      atualizarOpcoesTroco();
      
      // Garante que a categoria "Pizzas" seja a primeira a carregar
      document.querySelector('[data-categoria="pizza"]').classList.add('active');
      selecionar('pizza');
      
      // Listener para o menu inferior (apenas para trocar o estado ativo visualmente)
      const items = document.querySelectorAll('.navigation ul li');
      items.forEach(item => {
        item.addEventListener('click', e => {
          items.forEach(i => i.classList.remove('active'));
          item.classList.add('active');
        });
      });
    };
  </script>
  </body>
</html>
